<!-- breadcrumb -->
<div class="container">
  <div class="bread-crumb flex-w p-l-25 p-r-15 p-t-30 p-lr-0-lg">
    <a href="index.html" class="stext-109 cl8 hov-cl1 trans-04">
      Home
      <i class="fa fa-angle-right m-l-9 m-r-10" aria-hidden="true"></i>
    </a>

    <span class="stext-109 cl4"> Shopping Cart </span>
  </div>
</div>

<!-- Shopping Cart -->
<div class="bg0 p-t-75 p-b-85">
  <div class="container">
    <div class="row">
      <div class="col-sm-10 col-lg-7 col-xl-5 m-lr-auto m-b-50">
        <div
          class="bor10 p-lr-40 p-t-30 p-b-40 m-l-63 m-r-40 m-lr-0-xl p-lr-15-sm"
        >
          <h4 class="mtext-109 cl2">Hello Mishab</h4>
          <div class="flex-w flex-t bor12 p-b-13"></div>

          <div class="flex-w flex-t bor12 p-t-15 p-b-30">
            <!-- Profile -->
            <a
              href="/account-details"
              class="flex-w flex-t p-t-27 p-b-33 w-full items-center link-row"
            >
              <div class="icon-box">
                <i class="fa-solid fa-user"></i>
              </div>
              <div class="text-box">
                <span class="mtext-110 cl2">Profile Information</span>
              </div>
            </a>

            <!-- Super Coin -->
            <a
              href="/super-coin"
              class="flex-w flex-t p-t-27 p-b-33 w-full items-center link-row"
            >
              <div class="icon-box">
                <i class="fa-solid fa-coins"></i>
              </div>
              <div class="text-box">
                <span class="mtext-110 cl2">Super Coin</span>
              </div>
            </a>

            <!-- Orders -->
            <a
              href="/orders"
              class="flex-w flex-t p-t-27 p-b-33 w-full items-center link-row"
            >
              <div class="icon-box">
                <i class="fa-solid fa-truck"></i>
              </div>
              <div class="text-box">
                <span class="mtext-110 cl2">Orders</span>
              </div>
            </a>

            <!-- Wish List -->
            <a
              href="/wish-list"
              class="flex-w flex-t p-t-27 p-b-33 w-full items-center link-row"
            >
              <div class="icon-box">
                <i class="fa-solid fa-heart"></i>
              </div>
              <div class="text-box">
                <span class="mtext-110 cl2">Wish List</span>
              </div>
            </a>

            <!-- Coupons -->
            <a
              href="/coupons"
              class="flex-w flex-t p-t-27 p-b-33 w-full items-center link-row"
            >
              <div class="icon-box">
                <i class="fa-solid fa-ticket"></i>
              </div>
              <div class="text-box">
                <span class="mtext-110 cl2">Coupons</span>
              </div>
            </a>
            <a
              href="/address"
              class="flex-w flex-t p-t-27 p-b-33 w-full items-center link-row"
            >
              <div class="icon-box">
                <i class="fa-solid fa-address-card"></i>
              </div>
              <div class="text-box">
                <span class="mtext-110 cl2">Address</span>
              </div>
            </a>

            <!-- Notifications -->
            <a
              href="/notifications"
              class="flex-w flex-t p-t-27 p-b-33 w-full items-center link-row"
            >
              <div class="icon-box">
                <i class="fa-solid fa-bell"></i>
              </div>
              <div class="text-box">
                <span class="mtext-110 cl2">Notifications</span>
              </div>
            </a>
          </div>

          <button
            class="small-btn flex-c-m stext-101 cl0 bg3 bor14 trans-04 pointer"
          >
            Logout
          </button>
        </div>
      </div>
      <div class="col-lg-10 col-xl-7 m-lr-auto m-b-50">
        <header class="address-header">
          <div class="container">
            <div class="address-header-content">
              <div class="address-header-title">
                <div class="address-header-icon">
                  <i class="fas fa-box"></i>
                </div>
                <div>
                  <h1>My Addresses</h1>
                  <p>Manage your delivery addresses for faster checkout</p>
                </div>
              </div>
              <button class="address-btn-primary" id="addAddressBtn">
                <i class="fas fa-plus"></i>
                Add New Address
              </button>
            </div>
          </div>
        </header>
        <!-- Main Content -->
        <main class="main-content">
          <div class="container">
            <!-- Address Grid -->
            <div class="address-grid" id="addressGrid">
              <!-- Address Card 1 -->
              <div class="address-card">
                <div class="address-card-content">
                  <div class="address-card-header">
                    <div class="address-info">
                      <div class="address-icon">
                        <i class="fas fa-map-marker-alt"></i>
                      </div>
                      <div>
                        <h3>John Doe</h3>
                        <span class="badge">Default Address</span>
                      </div>
                    </div>
                    <div class="card-actions">
                      <button
                        class="btn-icon btn-edit"
                        onclick="editAddress(1)"
                      >
                        <i class="fas fa-edit"></i>
                      </button>
                      <button
                        class="btn-icon btn-delete"
                        onclick="deleteAddress(1)"
                      >
                        <i class="fas fa-trash"></i>
                      </button>
                    </div>
                  </div>

                  <div class="address-details">
                    <div class="address-text">
                      <p class="street">123 Main Street, Apt 4B</p>
                      <p class="city-state">New York, NY 10001</p>
                    </div>
                    <div class="phone-info">
                      <i class="fas fa-phone"></i>
                      <span>(555) 123-4567</span>
                    </div>
                  </div>
                  <div class="card-decoration"></div>
                </div>
              </div>

              <!-- Address Card 2 -->
              <div class="address-card">
                <div class="address-card-content">
                  <div class="address-card-header">
                    <div class="address-info">
                      <div class="address-icon">
                        <i class="fas fa-map-marker-alt"></i>
                      </div>
                      <div>
                        <h3>John Doe</h3>
                      </div>
                    </div>
                    <div class="card-actions">
                      <button
                        class="btn-icon btn-edit"
                        onclick="editAddress(2)"
                      >
                        <i class="fas fa-edit"></i>
                      </button>
                      <button
                        class="btn-icon btn-delete"
                        onclick="deleteAddress(2)"
                      >
                        <i class="fas fa-trash"></i>
                      </button>
                    </div>
                  </div>

                  <div class="address-details">
                    <div class="address-text">
                      <p class="street">456 Oak Avenue</p>
                      <p class="city-state">Brooklyn, NY 11201</p>
                    </div>
                    <div class="phone-info">
                      <i class="fas fa-phone"></i>
                      <span>(555) 987-6543</span>
                    </div>
                  </div>
                  <div class="card-decoration"></div>
                </div>
              </div>
            </div>

            <!-- Empty State (hidden by default) -->
            <div class="empty-state" id="emptyState" style="display: none">
              <div class="empty-icon">
                <i class="fas fa-map-marker-alt"></i>
              </div>
              <h3>No addresses saved</h3>
              <p>Add your first address to get started with faster checkouts</p>
              <button class="btn-primary" onclick="showAddressForm()">
                <i class="fas fa-plus"></i>
                Add Your First Address
              </button>
            </div>
          </div>
        </main>
        <div class="modal-overlay" id="modalOverlay">
          <div class="address-form-card">
            <div class="form-header">
              <div class="form-title">
                <div class="address-form-icon">
                  <i class="fas fa-map-marker-alt"></i>
                </div>
                <h2 id="formTitle">Add New Address</h2>
              </div>
              <button class="address-btn-close" onclick="closeAddressForm()">
                <i class="fas fa-times"></i>
              </button>
            </div>

            <form class="address-form" id="addressForm">
              <div class="form-group">
                <label for="name">Full Name</label>
                <input
                  type="text"
                  id="name"
                  name="name"
                  placeholder="Enter full name"
                  required
                />
              </div>

              <div class="form-group">
                <label for="street">Street Address</label>
                <input
                  type="text"
                  id="street"
                  name="street"
                  placeholder="Enter street address"
                  required
                />
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="city">City</label>
                  <input
                    type="text"
                    id="city"
                    name="city"
                    placeholder="City"
                    required
                  />
                </div>
                <div class="form-group">
                  <label for="state">State</label>
                  <input
                    type="text"
                    id="state"
                    name="state"
                    placeholder="State"
                    required
                  />
                </div>
              </div>

              <div class="form-group">
                <label for="zipCode">ZIP Code</label>
                <input
                  type="text"
                  id="zipCode"
                  name="zipCode"
                  placeholder="ZIP Code"
                  required
                />
              </div>

              <div class="form-group">
                <label for="phone">Phone Number</label>
                <input
                  type="tel"
                  id="phone"
                  name="phone"
                  placeholder="Phone number"
                  required
                />
              </div>

              <div class="form-switch">
                <input type="checkbox" id="isDefault" name="isDefault" />
                <label for="isDefault">Set as default address</label>
              </div>

              <div class="form-actions">
                <button
                  type="button"
                  class="address-btn-secondary"
                  onclick="closeAddressForm()"
                >
                  Cancel
                </button>
                <button type="submit" class="address-btn-primary">Save Address</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- </div> -->

<script>
  document.querySelectorAll(".link-row").forEach((link) => {
    if (link.getAttribute("href") === window.location.pathname) {
      link.style.color = "#717fe0";
      const icon = link.querySelector("i");
      if (icon) {
        icon.style.color = "#717fe0";
      }
    }
  });
  let addresses = [
    {
      id: 1,
      name: "John Doe",
      street: "123 Main Street, Apt 4B",
      city: "New York",
      state: "NY",
      zipCode: "10001",
      phone: "(555) 123-4567",
      isDefault: true,
    },
    {
      id: 2,
      name: "John Doe",
      street: "456 Oak Avenue",
      city: "Brooklyn",
      state: "NY",
      zipCode: "11201",
      phone: "(555) 987-6543",
      isDefault: false,
    },
  ];

  let editingId = null;

  // DOM Elements
  const modalOverlay = document.getElementById("modalOverlay");
  const addressForm = document.getElementById("addressForm");
  const formTitle = document.getElementById("formTitle");
  const toast = document.getElementById("toast");
  const toastMessage = document.getElementById("toastMessage");
  const addressGrid = document.getElementById("addressGrid");
  const emptyState = document.getElementById("emptyState");

  // Show address form
  function showAddressForm(address = null) {
    if (address) {
      editingId = address.id;
      formTitle.textContent = "Edit Address";

      // Populate form fields
      document.getElementById("name").value = address.name;
      document.getElementById("street").value = address.street;
      document.getElementById("city").value = address.city;
      document.getElementById("state").value = address.state;
      document.getElementById("zipCode").value = address.zipCode;
      document.getElementById("phone").value = address.phone;
      document.getElementById("isDefault").checked = address.isDefault;
    } else {
      editingId = null;
      formTitle.textContent = "Add New Address";
      addressForm.reset();
    }

    modalOverlay.classList.add("active");
  }

  // Close address form
  function closeAddressForm() {
    modalOverlay.classList.remove("active");
    addressForm.reset();
    editingId = null;
  }

  // Edit address
  function editAddress(id) {
    const address = addresses.find((addr) => addr.id === id);
    if (address) {
      showAddressForm(address);
    }
  }

  // Delete address
  function deleteAddress(id) {
    if (confirm("Are you sure you want to delete this address?")) {
      addresses = addresses.filter((addr) => addr.id !== id);
      renderAddresses();
      showToast("Address deleted successfully!");
    }
  }

  // Show toast notification
  function showToast(message) {
    toastMessage.textContent = message;
    toast.classList.add("show");

    setTimeout(() => {
      toast.classList.remove("show");
    }, 3000);
  }

  // Generate address card HTML
  function generateAddressCard(address) {
    return `
        <div class="address-card">
            <div class="address-card-content">
                <div class="address-card-header">
                    <div class="address-info">
                        <div class="address-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div>
                            <h3>${address.name}</h3>
                            ${
                              address.isDefault
                                ? '<span class="badge">Default Address</span>'
                                : ""
                            }
                        </div>
                    </div>
                    <div class="card-actions">
                        <button class="btn-icon btn-edit" onclick="editAddress(${
                          address.id
                        })">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn-icon btn-delete" onclick="deleteAddress(${
                          address.id
                        })">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>

                <div class="address-details">
                    <div class="address-text">
                        <p class="street">${address.street}</p>
                        <p class="city-state">${address.city}, ${
      address.state
    } ${address.zipCode}</p>
                    </div>
                    <div class="phone-info">
                        <i class="fas fa-phone"></i>
                        <span>${address.phone}</span>
                    </div>
                </div>
                <div class="card-decoration"></div>
            </div>
        </div>
    `;
  }

  // Render addresses
  function renderAddresses() {
    if (addresses.length === 0) {
      addressGrid.style.display = "none";
      emptyState.style.display = "block";
    } else {
      addressGrid.style.display = "grid";
      emptyState.style.display = "none";
      addressGrid.innerHTML = addresses.map(generateAddressCard).join("");
    }
  }

  // Form submission
  addressForm.addEventListener("submit", function (e) {
    e.preventDefault();

    const formData = new FormData(addressForm);
    const addressData = {
      name: formData.get("name"),
      street: formData.get("street"),
      city: formData.get("city"),
      state: formData.get("state"),
      zipCode: formData.get("zipCode"),
      phone: formData.get("phone"),
      isDefault: formData.get("isDefault") === "on",
    };

    if (editingId) {
      // Update existing address
      const index = addresses.findIndex((addr) => addr.id === editingId);
      if (index !== -1) {
        addresses[index] = { ...addressData, id: editingId };
        showToast("Address updated successfully!");
      }
    } else {
      // Add new address
      const newId = Math.max(...addresses.map((addr) => addr.id), 0) + 1;
      addresses.push({ ...addressData, id: newId });
      showToast("Address added successfully!");
    }

    // If this is set as default, remove default from others
    if (addressData.isDefault) {
      addresses.forEach((addr) => {
        if (addr.id !== editingId) {
          addr.isDefault = false;
        }
      });
    }

    renderAddresses();
    closeAddressForm();
  });

  // Event listeners
  document
    .getElementById("addAddressBtn")
    .addEventListener("click", () => showAddressForm());

  // Close modal when clicking overlay
  modalOverlay.addEventListener("click", function (e) {
    if (e.target === modalOverlay) {
      closeAddressForm();
    }
  });

  // Close modal with Escape key
  document.addEventListener("keydown", function (e) {
    if (e.key === "Escape" && modalOverlay.classList.contains("active")) {
      closeAddressForm();
    }
  });

  // Initialize
  document.addEventListener("DOMContentLoaded", function () {
    renderAddresses();
  });
</script>
